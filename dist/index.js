var d=Object.defineProperty;var W=r=>d(r,"__esModule",{value:!0});var D=(r,e)=>{W(r);for(var o in e)d(r,o,{get:e[o],enumerable:!0})};D(exports,{SETTINGS:()=>i,transform:()=>k});var i={DEBUG:!1};function s(r,e){for(;/\s/.test(r[e]);)e++;if(r[e]==="/"&&r[e+1]==="*"){for(e+=2;!(r[e]==="*"&&r[e+1]==="/");)e++;e+=2}for(;/\s/.test(r[e]);)e++;return e}function h(r,...e){i.DEBUG&&console.log("[Debug] "+r,...e)}function c(r,e,o){if(h(o),r[e]===void 0)throw new Error(o+" failed")}function w(r,e,o){let n="";for(e=s(r,e);!o.includes(r[e]);){if(c(r,e,"Waiting for "+JSON.stringify(o)),r[e]==="'")for(n+=r[e],e++;r[e]!=="'";)c(r,e,"Waiting for closing single quote"),n+=r[e],e++;else if(r[e]==='"')for(n+=r[e],e++;r[e]!=='"';)c(r,e,"Waiting for closing double quote"),n+=r[e],e++;else if(r[e]==="[")for(n+=r[e],e++;r[e]!=="]";)c(r,e,"Waiting for closing bracket"),n+=r[e],e++;n+=r[e],e++}return[n.trim(),e]}function y(r,e){let o="",n={selectors:[],declarations:[],type:"rule"};c(r,e,"Waiting for EOL"),e=s(r,e);let l=",";for(;c(r,e,"Waiting for comma"),[o,e]=w(r,e,["{",","]),n.selectors.push(o),e=s(r,e),l=r[e],l!=="{";)e++;for(e++;r[e]!=="}";){c(r,e,"Waiting for closing brace");let t={type:"declaration",property:"",value:""};e=s(r,e);let g=e;o="";let a=!1;for(;r[e]!==":";)if(c(r,e,"Waiting for colon "+(n.declarations.length>0?"after "+JSON.stringify(n.declarations[n.declarations.length-1],null,2):"after first declaration")),r[e]==="{"){let[f,u]=y(r,g);n.declarations.push(f),e=u,a=!0;break}else o+=r[e],e++;if(a){e=s(r,e);continue}e++,t.property=o.trim(),e=s(r,e),[o,e]=w(r,e,[";"]),e++,t.value=o.trim(),n.declarations.push(t),h("Found declaration",t),e=s(r,e)}return e++,h("Found rule",n),[n,e]}function E(r,e=0){let o=[];for(;e<r.length;){e=s(r,e);let[n,l]=y(r,e);o.push(n),e=s(r,l)}return o}function j(...r){return r.reduce((e,o)=>e.map(n=>o.map(l=>n.concat(l))).reduce((n,l)=>n.concat(l),[]),[[]])}function b(r){for(let e=0;e<r.length;e++){let o=r[e];o.declarations.forEach(function(l,t){if(l.type==="rule"&&!o.selectors[0].startsWith("@")){let g=[l];b(g),g.forEach(function(f,u){r.splice(e+1,0,{...f,selectors:j(o.selectors,f.selectors).map(R=>R.join(" "))})}),e++,o.declarations.splice(t,1)}})}}function m(r,e=""){let o=[];return r.forEach(function(l){if(l.declarations.length===0)return;let t=[e+l.selectors.join(`,
`)+" {"];l.declarations.forEach(function(a){if(a.type==="rule"){let f=m([a],e+"  ");t.push(f)}else t.push(e+"  "+a.property+": "+a.value+";")}),t.push(e+"}"),o.push(t.join(`
`))}),o.join(`

`)}function k(r){let e=E(r);return b(e),m(e)}0&&(module.exports={SETTINGS,transform});
//# sourceMappingURL=index.js.map
