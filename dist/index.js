var h=Object.defineProperty;var i=r=>h(r,"__esModule",{value:!0});var W=(r,e)=>{i(r);for(var o in e)h(r,o,{get:e[o],enumerable:!0})};W(exports,{SETTINGS:()=>d,transform:()=>k});var d={DEBUG:!1};function t(r,e){for(;/\s/.test(r[e]);)e++;if(r[e]==="/"&&r[e+1]==="*"){for(e+=2;!(r[e]==="*"&&r[e+1]==="/");)e++;e+=2}for(;/\s/.test(r[e]);)e++;return e}function u(r,...e){d.DEBUG&&console.log("[Debug] "+r,...e)}function a(r,e,o){if(u(o),r[e]===void 0)throw new Error(o+" failed")}function w(r,e,o){let n="";for(e=t(r,e);!o.includes(r[e]);){if(a(r,e,"Waiting for "+JSON.stringify(o)),r[e]==="'")for(n+=r[e],e++;r[e]!=="'";)a(r,e,"Waiting for closing single quote"),n+=r[e],e++;else if(r[e]==='"')for(n+=r[e],e++;r[e]!=='"';)a(r,e,"Waiting for closing double quote"),n+=r[e],e++;else if(r[e]==="[")for(n+=r[e],e++;r[e]!=="]";)a(r,e,"Waiting for closing bracket"),n+=r[e],e++;n+=r[e],e++}return[n.trim(),e]}function y(r,e){let o="",n={selectors:[],declarations:[],type:"rule"};a(r,e,"Waiting for EOL"),e=t(r,e);let l=",";for(;a(r,e,"Waiting for comma"),[o,e]=w(r,e,["{",","]),n.selectors.push(o),e=t(r,e),l=r[e],l!=="{";)e++;for(e++;r[e]!=="}";){a(r,e,"Waiting for closing brace");let s={type:"declaration",property:"",value:""};e=t(r,e);let f=e;o="";let c=!1;for(;r[e]!==":";)if(a(r,e,"Waiting for colon "+(n.declarations.length>0?"after "+JSON.stringify(n.declarations[n.declarations.length-1],null,2):"after first declaration")),r[e]==="{"){let[g,m]=y(r,f);n.declarations.push(g),e=m,c=!0;break}else o+=r[e],e++;if(c){e=t(r,e);continue}e++,s.property=o.trim(),e=t(r,e),[o,e]=w(r,e,[";"]),e++,s.value=o.trim(),n.declarations.push(s),u("Found declaration",s),e=t(r,e)}return e++,u("Found rule",n),[n,e]}function D(r,e=0){let o=[];for(;e<r.length;){e=t(r,e);let[n,l]=y(r,e);o.push(n),e=t(r,l)}return o}function R(...r){return r.reduce((e,o)=>e.map(n=>o.map(l=>n.concat(l))).reduce((n,l)=>n.concat(l),[]),[[]])}function E(r){for(let e=0;e<r.length;e++){let o=r[e];o.declarations.forEach(function(l,s){l.type==="rule"&&!o.selectors[0].startsWith("@")&&(r.splice(e+1,0,{...l,selectors:R(o.selectors,l.selectors).map(f=>f.join(" "))}),e++,o.declarations.splice(s,1))})}}function b(r,e=""){let o=[];return r.forEach(function(l){let s=[e+l.selectors.join(`,
`)+" {"];l.declarations.forEach(function(c){if(c.type==="rule"){let g=b([c],e+"  ");s.push(g)}else s.push(e+"  "+c.property+": "+c.value+";")}),s.push(e+"}"),o.push(s.join(`
`))}),o.join(`

`)}function k(r){let e=D(r);return E(e),b(e)}0&&(module.exports={SETTINGS,transform});
//# sourceMappingURL=index.js.map
