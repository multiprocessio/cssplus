var R=Object.create;var u=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var k=r=>u(r,"__esModule",{value:!0});var j=(r,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of D(e))!v.call(r,o)&&o!=="default"&&u(r,o,{get:()=>e[o],enumerable:!(n=W(e,o))||n.enumerable});return r},A=r=>j(k(u(r!=null?R(E(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var y=A(require("fs"));var I=!1;function a(r,e){for(;/\s/.test(r[e]);)e++;if(r[e]==="/"&&r[e+1]==="*"){for(e+=2;!(r[e]==="*"&&r[e+1]==="/");)e++;e+=2}for(;/\s/.test(r[e]);)e++;return e}function h(r,...e){I&&console.log("[Debug] "+r,...e)}function c(r,e,n){if(h(n),r[e]===void 0)throw new Error(n+" failed")}function d(r,e){let n="",o={selectors:[],declarations:[],type:"rule"};c(r,e,"Waiting for EOL"),e=a(r,e);let l=",";for(;c(r,e,"Waiting for comma"),[n,e]=m(r,e,["{",","]),o.selectors.push(n),e=a(r,e),l=r[e],l!=="{";)e++;for(e++;r[e]!=="}";){c(r,e,"Waiting for closing brace");let s={type:"declaration",property:"",value:""};e=a(r,e);let f=e;n="";let t=!1;for(;r[e]!==":";)if(c(r,e,"Waiting for colon "+o.declarations.length?"after "+JSON.stringify(o.declarations[o.declarations.length-1],null,2):" after first declaration"),r[e]==="{"){let[g,b]=d(r,f);o.declarations.push(g),e=b,t=!0;break}else n+=r[e],e++;if(t){e=a(r,e);continue}e++,s.property=n.trim(),e=a(r,e),[n,e]=m(r,e,[";"]),e++,s.value=n.trim(),o.declarations.push(s),h("Found declaration",s),e=a(r,e)}return e++,h("Found rule",o),[o,e]}function S(r,e=0){let n=[];for(;e<r.length;){e=a(r,e);let[o,l]=d(r,e);n.push(o),e=a(r,l)}return n}function m(r,e,n){let o="";for(e=a(r,e);!n.includes(r[e]);){if(c(r,e,"Waiting for "+n),r[e]==="'")for(o+=r[e],e++;r[e]!=="'";)c(r,e,"Waiting for closing single quote"),o+=r[e],e++;else if(r[e]==='"')for(o+=r[e],e++;r[e]!=='"';)c(r,e,"Waiting for closing double quote"),o+=r[e],e++;else if(r[e]==="[")for(o+=r[e],e++;r[e]!=="]";)c(r,e,"Waiting for closing bracket"),o+=r[e],e++;o+=r[e],e++}return[o.trim(),e]}function x(...r){return r.reduce((e,n)=>e.map(o=>n.map(l=>o.concat(l))).reduce((o,l)=>o.concat(l),[]),[[]])}function F(r){r.forEach(function(n,o){n.declarations.forEach(function(s,f){s.type==="rule"&&!n.selectors[0].startsWith("@")&&(r.splice(o+1,0,{...s,selectors:x(n.selectors,s.selectors).map(t=>t.join(" "))}),n.declarations.splice(f,1))})})}function w(r,e=""){let n=[];return r.forEach(function(l){let s=[e+l.selectors.join(`,
`)+" {"];l.declarations.forEach(function(t){if(t.type==="rule"){let g=w([t],e+"  ");s.push(g)}else s.push(e+"  "+t.property+": "+t.value+";")}),s.push(e+"}"),n.push(s.join(`
`))}),n.join(`

`)}function i(r){let e=S(r);return F(e),w(e)}var q=y.default.readFileSync(process.argv[2]).toString();console.log(i(q));
//# sourceMappingURL=index.js.map
